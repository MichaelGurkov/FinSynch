
<!-- Import raw data -->


```{r libraries}

library(MiscImport)

library(dplyr)

devtools::load_all()

```


```{r Import_raw_data}

raw_data = list()

raw_data$country_codes = get_country_codes()

raw_data$total_credit = get_total_credit_data()

raw_data$bis_lbs = get_lbs_data()

raw_data$cpi = get_us_cpi()  

raw_data$gdp_constant = get_wdi_gdp(
  paste0(
    Sys.getenv("USERPROFILE"),
    "\\OneDrive - Bank Of Israel\\Data",
    "\\World Bank\\gdp",
    "\\constant_gdp.csv"
  )
)

# raw_data$gdp_current = get_wdi_gdp(
#   paste0(
#     Sys.getenv("USERPROFILE"),
#     "\\OneDrive - Bank Of Israel\\Data",
#     "\\World Bank\\gdp",
#     "\\current_gdp.csv"
#   )
# )

raw_data$house_price = get_oecd_house_price()

raw_data$share_price = get_oecd_share_price()

raw_data$imf_trade_df = get_imf_trade_data()

raw_data$trilemma_ind = get_trilemma_ind()

raw_data$fin_dev_ind = get_fin_dev_ind()

raw_data$crises_df = get_fin_crises_data_Lavaen()


```


```{r Import_raw_data_EU_membership, eval=FALSE}

eu_df = read_csv(paste0(Sys.getenv("USERPROFILE"),
  "\\OneDrive - Bank Of Israel\\Data\\Misc\\EU_membership.csv"),
  show_col_types = FALSE) %>%
  rename_with(tolower) %>%
  mutate(country = str_replace_all("\\s","_",country)) %>%
  mutate(country = str_replace_all("The_Netherlands","Netherlands",
                       country)) %>%
  mutate(country = str_replace_all("Slovakia","Slovak_Republic",
                       country))


eu_dates_vec = seq.Date(
  from = as.Date(min(raw_data$bis_lbs$date)),
  to = as.Date(max(raw_data$bis_lbs$date)),
  by = "year") %>%
  format(.,"%Y")

raw_data$EU_both = construct_countrypair_EU_index(
  eu_df = eu_df %>%
    select(Country, EU) %>%
    rename(Date = EU),
  dates_vec = eu_dates_vec,
  countries = countries_list$oecd_countries) %>%
  rename(EU_both = Status) %>%
  mutate(Date = as.character(Date))

raw_data$EU_one = construct_countrypair_EU_index(
  eu_df = eu_df %>%
    select(Country, EU) %>%
    rename(Date = EU),
  dates_vec = eu_dates_vec,
  countries = countries_list$oecd_countries,
  index_status = "one") %>%
  rename(EU_one = Status) %>%
  mutate(Date = as.character(Date))


raw_data$Euro_both = construct_countrypair_EU_index(
  eu_df = eu_df %>%
    select(Country, Euro_area) %>%
    rename(Date = Euro_area) %>%
    filter(!Date == "Not a member"),
  dates_vec = eu_dates_vec,
  countries = countries_list$oecd_countries) %>%
  rename(Euro_both = Status) %>%
  mutate(Date = as.character(Date))

raw_data$Euro_one = construct_countrypair_EU_index(
  eu_df = eu_df %>%
    select(Country, Euro_area) %>%
    rename(Date = Euro_area),
  dates_vec = eu_dates_vec,
  countries = countries_list$oecd_countries,
  index_status = "one") %>%
  rename(Euro_one = Status) %>%
  mutate(Date = as.character(Date))

rm(eu_df, eu_dates_vec)

```

```{r Import_raw_data_common_language, eval=FALSE}

raw_data$geodist = import.geodist.data() %>%
  filter(Country %in% countries_list$oecd_countries) %>%
  filter(Counter_Country %in% countries_list$oecd_countries) %>%
  mutate(CountryPair = ifelse(Country < Counter_Country,
                              paste(Country, Counter_Country,
                                    sep = "-"),
                              paste(Counter_Country,Country,
                                    sep = "-"))) %>%
  select(-Country, -Counter_Country) %>%
  distinct()

```

```{r Import_raw_data_IMF, eval=FALSE}

raw_data$trade = import.imf.trade.data()

```

